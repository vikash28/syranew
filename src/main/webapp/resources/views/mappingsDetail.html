<div class="portlet box red-sunglo">
   <div class="portlet-title">
      <div class="caption">
         <i class="icon-magic-wand"></i><span>{{ mappingDetail.mappingName }}</span>
      </div>
      <div class="actions" id="actionsSchedule">
          <a class="btn default btn-xs run purple" href="javascript:;"><i class="fa fa-play"></i>Run</a>
          <a class="btn default btn-xs edit green" href="#/edit_mappings/{{mappingDetail.id}}"><i class="fa fa-pencil-square-o"></i>Edit</a>
          <a class="btn default btn-xs delete red" href="javascript:;"><i class="fa fa-trash"></i>Delete</a>
          <a class="btn default btn-xs schedule blue" href="javascript:;"><i class="fa fa-calendar"></i>Schedule</a> 
      </div>
   </div>
   <div class="portlet-body" style="height: auto;">
      <table class="table table-bordered">
         <tr>
            <td>
               <div ng-if="mappingDetail.sourceConnectionType == 'Hive' && mappingDetail.targetConnectionType == 'Redshift'">
                  <table>
                     <th colspan="2">Source</th>
                     <tr>
                        <td>Hive Thrift Server: </td>
                        <td>{{ mappingsArray.hiveThriftServer }}</td>
                     </tr>
                     <tr>
                        <td>Hive Table Data Location: </td>
                        <td>{{ concatDataSrc.hiveTableDataLocation }}</td>
                     </tr>
                     <tr>
                        <td>Hive Table: </td>
                        <td>{{ concatDataSrc.hiveTableName }}</td>
                     </tr>
                     <tr>
                        <td>Separator: </td>
                        <td>{{ concatDataSrc.seperator }}</td>
                     </tr>
                  </table>
               </div>
               <div ng-if="mappingDetail.sourceConnectionType == 'Hive' && mappingDetail.targetConnectionType == 'Hive'">
                  <table>
                     <th colspan="2">Source</th>
                     <tr>
                        <td>Hive Thrift Server: </td>
                        <td>{{ mappingsArray.srcConnectionStr }}</td>
                     </tr>
                     <tr>
                        <td>Hive Table Data Location: </td>
                        <td>{{ mappingsArray.srcDataLocation }}</td>
                     </tr>
                     <tr>
                        <td>Hive Table: </td>
                        <td>{{ mappingsArray.srcTableName }}</td>
                     </tr>
                     <tr>
                        <td>Separator: </td>
                        <td>{{ mappingsArray.srcSeperator }}</td>
                     </tr>
                  </table>
               </div>
               <div ng-if="mappingDetail.sourceConnectionType == 'HDFS' && mappingDetail.targetConnectionType == 'Redshift'">
                  <table>
                     <th colspan="2">Source</th>
                     <tr>
                        <td>HDFS Connection String: </td>
                        <td>{{ mappingsArray.hdfsFileName }}</td>
                     </tr>
                     <tr>
                        <td>HDFS Path: </td>
                        <td>{{ mappingsArray.hdfs }}</td>
                     </tr>
                     <tr>
                        <td>HDFS Access User: </td>
                        <td>{{ mappingsArray.hdfsAccessUser }}</td>
                     </tr>
                     <tr>
                        <td>Separator: </td>
                        <td>{{ mappingsArray.seperator }}</td>
                     </tr>
                  </table>
               </div>
               <div ng-if="mappingDetail.sourceConnectionType == 'Local' && mappingDetail.targetConnectionType == 'Redshift'">
                  <table>
                     <th colspan="2">Source</th>
                     <tr>
                        <td>S3 File Path: </td>
                        <td>{{ mappingsArray.localS3FilePath }}</td>
                     </tr>
                     <tr>
                        <td>Separator: </td>
                        <td>{{ mappingsArray.seperator }}</td>
                     </tr>
                  </table>
               </div>
            </td>
            <td>
               <div ng-if="mappingDetail.targetConnectionType == 'Redshift'">
                  <table>
                     <th colspan="2">Target</th>
                     <tr>
                        <td>Redshift DB URL: </td>
                        <td>{{ mappingsArray.redshiftDBURL }}</td>
                     </tr>
                     <tr>
                        <td>Redshift User: </td>
                        <td>{{ mappingsArray.redshiftUser }}</td>
                     </tr>
                     <tr>
                        <td>Redshift Password: </td>
                        <td>*****</td>
                     </tr>
                     <tr>
                        <td>S3 Access Key: </td>
                        <td>{{ mappingsArray.s3AccessKey }}</td>
                     </tr>
                     <tr>
                        <td>S3 Secret Key: </td>
                        <td>*****</td>
                     </tr>
                     <tr>
                        <td>HDFS Temp Directory: </td>
                        <td>{{ mappingsArray.tmpDir }}</td>
                     </tr>
                     <tr>
                        <td>Redshift Table: </td>
                        <td>{{ RedShifttargetTable }}</td>
                     </tr>
                  </table>
               </div>
               <div ng-if="mappingDetail.targetConnectionType == 'Hive'">
                  <table>
                     <th colspan="2">Target</th>
                     <tr>
                        <td>Hive Thrift Server: </td>
                        <td>{{ mappingsArray.destConnectionStr }}</td>
                     </tr>
                     <tr>
                        <td>Hive Table Data Location: </td>
                        <td>{{ HiveTarget.destDataLocation }}</td>
                     </tr>
                     <tr>
                        <td>Hive Table: </td>
                        <td>{{ HiveTarget.destTableName }}</td>
                     </tr>
                     <tr>
                        <td>Separator: </td>
                        <td>{{ HiveTarget.destSeperator }}</td>
                     </tr>
                  </table>
               </div>
            </td>
         </tr>
      </table>
   </div>
</div>
<!-- BEGIN LIST OF SCHEDULES PORTLET -->
<div class="portlet box red-sunglo">
   <div class="portlet-title">
      <div class="caption">
         <i class="fa fa-calendar"></i><span>Schedules</span>
      </div>
      <div class="tools">
         <a class="collapse" href="javascript:;" data-original-title="" title="">
         </a>
         <a class="reload reload-schedules" href="javascript:;" data-original-title="" title="">
         </a>
         <a class="fullscreen" href="javascript:;" data-original-title="" title="">
         </a>
      </div>
   </div>
   <div class="portlet-body" style="height: auto;">
      <!-- BEGIN LIST OF SCHEDULES TABLE -->
      <div class="row">
         <div class="col-sm-12 col-sm-offset-0">
            <form id="ajaxJobForm">
               <input type="hidden" name="jobName" id="jobName" value="-1" />
            </form>
            <table class="table table-striped table-bordered table-hover" id="tableScheduleList">
               <thead>
                  <tr>
                     <th class="font-grey-gallery">
                        Schedule Name
                     </th>
                     <th class="font-grey-gallery">
                        Cron Expression
                     </th>
                     <th class="font-grey-gallery">
                        Frequency
                     </th>
                     <th class="font-grey-gallery">
                        Start at
                     </th>
                     <th class="font-grey-gallery">
                        End at
                     </th>
                     <th class="font-grey-gallery">
                        Trigger Precheck File
                     </th>
                     <th class="font-grey-gallery">
                        Status
                     </th>
                     <th>
                     </th>
                  </tr>
               </thead>
            </table>
         </div>
      </div>
      <!-- END LIST OF SCHEDULES TABLE -->
   </div>
</div>
<!-- END LIST OF SCHEDULES PORTLET -->
<!-- BEGIN LIST OF SCHEDULERLOGS PORTLET -->
<div class="portlet box blue-hoki">
   <div class="portlet-title">
      <div class="caption">
         <i class="fa fa-file-text-o"></i>Logs
      </div>
      <div class="tools">
         <a class="collapse" href="javascript:;" data-original-title="" title="">
         </a>
         <a class="reload reload-schedulelogs" href="javascript:;" data-original-title="" title="">
         </a>
         <a class="fullscreen" href="javascript:;" data-original-title="" title="">
         </a>
      </div>
   </div>
   <div class="portlet-body" style="height: auto;">
      <!-- BEGIN LIST OF SCHEDULERLOGS TABLE -->
      <div class="row">
         <div class="col-sm-12 col-sm-offset-0">
            <form id="ajaxJobFormSchedulerLog">
               <input type="hidden" name="logName" id="logName" value="-1" />
               <input type="hidden" name="logType" id="logType" value="JOB" />
            </form>
            <table class="table table-striped table-bordered table-hover" id="tableSchedulerLogList">
               <thead>
                  <tr>
                     <th class="font-grey-gallery">
                        Timestamp
                     </th>
                     <th class="font-grey-gallery">
                        Trigger Name
                     </th>
                     <th class="font-grey-gallery">
                        Log Type
                     </th>
                     <th class="font-grey-gallery">
                        Start Msg
                     </th>
                     <th class="font-grey-gallery">
                        Result
                     </th>
                  </tr>
               </thead>
            </table>
         </div>
      </div>
      <!-- END LIST OF SCHEDULERLOGS TABLE -->
   </div>
</div>
<!-- END LIST OF SCHEDULERLOGS PORTLET -->
<!-- NEW SCHEDULE MODEL -->
<div role="dialog" class="modal fade bs-modal-lg" id="myModal_newschedule"  tabindex="-1" data-backdrop="static" data-keyboard="false">
   <div class="modal-dialog modal-lg">
      <div class="modal-content">
         <div class="modal-header">
            <button aria-hidden="true" data-dismiss="modal" class="close" type="button"></button>
            <h4 class="modal-title"><i class="fa fa-calendar"></i> <span id="myModal_newschedule_title">Create New Schedule</span></h4>
         </div>
         <div class="modal-body form">
            <form action="#" class="form-horizontal" id="scheduleForm" method="POST">
               <div class="form-wizard">
                  <div class="form-body">
                     <div>
                        <div class="alert alert-danger display-none">
                           <button class="close" data-dismiss="alert"></button>
                           You have some form errors. Please check below.
                        </div>
                        <div class="alert alert-success display-none">
                           <button class="close" data-dismiss="alert"></button>
                           Your form validation is successful!
                        </div>
                        <div class="form-group">
                           <label class="control-label col-sm-5">Name <span class="required">
                           * </span>
                           </label>
                           <div class="col-sm-6">
                              <input type="hidden" class="form-control" id="mappingId" value=""/>
                              <input type="text" class="form-control" id="scheduleName" value="" required />
                              <span class="help-block">
                              Provide a name for this schedule </span>
                           </div>
                        </div>
                        <div class="form-group">
                           <label class="control-label col-sm-5">Trigger Precheck File
                           </label>
                           <div class="col-sm-6">
                              <input type="text" class="form-control" id="triggerPrecheckFile" value=""/>
                              <span class="help-block">
                              This schedule will execute only if the mentioned File exists </span>
                           </div>
                        </div>
                        <div class="tabbable-custom nav-justified">
                           <ul class="nav nav-tabs nav-justified">
                              <li class="active">
                                 <a href="#tab_schedule" data-toggle="tab">
                                 Schedule </a>
                              </li>
                              <li>
                                 <a href="#tab_workflow" data-toggle="tab">
                                 Workflow </a>
                              </li>
                           </ul>
                           <div class="tab-content">
                              <div class="tab-pane active" id="tab_schedule">
                                 <div class="form-group">
                                    <label class="control-label col-sm-5">Schedule <span class="required">
                                    * </span>
                                    </label>
                                    <div class="col-sm-6">
                                       <input id="cron" name="cron" class="form-control" required />
                                       <span class="help-block">
                                       Provide a schedule for this workflow </span>
                                    </div>
                                 </div>
                                 <div class="form-group">
                                    <label class="control-label col-sm-5">Start at </label>
                                    <div class="col-sm-6">
                                       <div class="input-group date form_startat" data-date-startdate="+0d">
                                          <input type="text" class="form-control" readonly="" size="16">
                                          <span class="input-group-btn">
                                          <button type="button" class="btn default date-set"><i class="fa fa-calendar"></i></button>
                                          </span>
                                       </div>
                                       <!-- /input-group -->
                                    </div>
                                 </div>
                                 <div class="form-group">
                                    <label class="control-label col-sm-5">End at </label>
                                    <div class="col-sm-6">
                                       <div class="input-group date form_endat" data-date-startdate="+0d">
                                          <input type="text" class="form-control" readonly="" size="16">
                                          <span class="input-group-btn">
                                          <button type="button" class="btn default date-set"><i class="fa fa-calendar"></i></button>
                                          </span>
                                       </div>
                                       <!-- /input-group -->
                                    </div>
                                 </div>
                              </div>
                              <div class="tab-pane" id="tab_workflow">
                                 <div class="form-group">
                                    <label class="control-label col-sm-5">Start this schedule after <span class="required">
                                    * </span></label>
                                    <div class="col-sm-6">
                                       <select class="form-control input-xlarge" name="wfParent" id="wfParent" required >
                                          <option value="-1"></option>
                                       </select>
                                       <span class="help-block">
                                       This schedule will start after completion of this parent task </span>
                                    </div>
                                 </div>
                                 <div class="form-group">
                                    <label class="control-label col-sm-5">Priority <span class="required">
                                    * </span></label>
                                    <div class="col-sm-6">
                                       <select class="form-control input-xsmall" name="wfPriority" id="wfPriority" required >
                                          <option value="1">1</option>
                                          <option value="2">2</option>
                                          <option value="3">3</option>
                                          <option value="4">4</option>
                                          <option value="5">5</option>
                                          <option value="6">6</option>
                                          <option value="7">7</option>
                                          <option value="8">8</option>
                                          <option value="9">9</option>
                                          <option value="10">10</option>
                                       </select>
                                       <span class="help-block">
                                       The order/rank of this schedule.</span>
                                    </div>
                                 </div>
                                 <div class="form-group">
                                    <label class="control-label col-sm-5">Run only if parent task completed successfully <span class="required">
                                    * </span></label>
                                    <div class="col-sm-6">
                                       <input type="checkbox" value="yes" name="wfParentExec" id="wfParentExec" checked>
                                       <span class="help-block">
                                       Run this schedule only if the parent task executed successfully </span>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </form>
         </div>
         <div class="modal-footer">
            <button data-dismiss="modal" class="btn btn-default" type="button">Close</button>
            <button class="btn btn-default" type="reset" ng-click="resetSchedule()">Reset</button>
            <button class="btn btn-primary" type="submit" ng-click="saveSchedule()"><i class="fa fa-check"></i> Create Schedule</button>
         </div>
      </div>
   </div>
</div>
<!-- END SCHEDULE MODAL-->
<!-- END PAGE CONTENT-->
<div class="hide">
   <table class="table" id="tableMappings">
      <thead>
         <tr>
            <th></th>
            <th class="font-grey-gallery">
               Workflow Name
            </th>
            <th class="font-grey-gallery">
               Folder
            </th>
            <th class="font-grey-gallery">
               Source
            </th>
            <th class="font-grey-gallery">
               Source Connection
            </th>
            <th class="font-grey-gallery">
               Target
            </th>
            <th class="font-grey-gallery">
               Target Connection
            </th>
            <th class="font-grey-gallery">
               Table
            </th>
            <th>
            </th>
            <th>
            </th>
         </tr>
      </thead>
   </table>
</div>
<script>
   $(document).ready(function(){
   		
   	/* ColVis for Log Table !! */
   	setTimeout(function(){
   		var colvis = new $.fn.dataTable.ColVis( oSchedulerLogTable );
   		$( colvis.button() ).insertBefore('#tableSchedulerLogList_filter');
   	},5000);
   	/* ColVis for Log Table !! */
   
   	/* Datetime Moment.js */
   	$.fn.dataTable.moment = function ( format, locale ) {
   		var types = $.fn.dataTable.ext.type;
   	 
   		// Add type detection
   		types.detect.unshift( function ( d ) {
   			return moment( d, format, locale, true ).isValid() ?
   				'moment-'+format :
   				null;
   		} );
   	 
   		// Add sorting method - use an integer for the sorting
   		types.order[ 'moment-'+format+'-pre' ] = function ( d ) {
   			return moment( d, format, locale, true ).unix();
   		};
   	};
   	/* Datetime Moment.js */	
   });
   
   syraCommon.init(); // init Syra commons		
   TableMappings.init();

   	
</script>
